(this.webpackJsonpbarberapp_front=this.webpackJsonpbarberapp_front||[]).push([[0],{156:function(e,t,a){},270:function(e,t,a){e.exports=a(518)},297:function(e,t,a){},357:function(e,t,a){},378:function(e,t,a){},518:function(e,t,a){"use strict";a.r(t);a(271);var n=a(0),r=a.n(n),o=a(29),c=a.n(o),l=a(20),s=a(21),i=a(79),u=a(258),m=a(18),p=a.n(m),d=a(27),h=a(24),E=a.n(h),f={apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL,b=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(f,"/api/v1/product/list/"),e.next=3,E.a.get(a).then((function(e){t({type:"FETCH_PRODUCTS",payload:{products:e.data}})})).catch((function(e){try{s.b.error("".concat(Object.values(e.response.data)[0]))}catch(e){console.log("e",e)}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=a(259),g=(a(297),a(298),a(13)),y=a(14),O=a(16),C=a(15),w=a(17),j=function(e){return{type:"SET_LOGIN",token:e}},_=a(532),N=a(261),x=a(526),S=a(153),R=a(82),T=a(36),M=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={color:"primary"},a.setColor=function(){"primary"===a.state.color?a.setState({color:"dark"}):a.setState({color:"primary"})},a.onLogout=function(){a.props.logout(),a.props.history.push("/")},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.current_user,a=e.barber,n=e.is_logged,o={apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"};return r.a.createElement(_.a,{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},r.a.createElement(T.b,{to:"/"},r.a.createElement("img",{alt:"",src:a.logo,className:"profile-pic header-logo"})),r.a.createElement(T.b,{to:"/",className:"navbar-brand"},a.name),r.a.createElement(N.a,{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:"".concat(o.staticURL,"/media/profile.png"),alt:"user",className:"profile-pic2 imagen_cover"}),r.a.createElement(x.a,{className:"derecha",alignRight:!0,title:t.name+" "+t.last_name,id:"dropdown-menu-align-right",variant:"link"},r.a.createElement(T.b,{to:"/appointments",className:"dropdown-item",role:"button"},"Mis Reservas"),"ADMIN"===t.role?r.a.createElement(T.b,{to:"/admin",className:"dropdown-item",role:"button"},"Administraci\xf3n"):null,r.a.createElement(S.a.Divider,null),r.a.createElement(S.a.Item,{eventKey:"4",onClick:this.onLogout},"Salir"))):r.a.createElement(T.b,{to:"/login"},"Ingresar"))))}}]),t}(n.Component),k=Object(l.b)((function(e){return{current_user:e.general.current_user,is_logged:e.general.is_logged,barber:e.general.barber}}),(function(e){return{logout:function(){e(j(!1))}}}))(Object(R.g)(M)),D=a(527),L=a(528),A=a(267),U=a(533),I=a(40),P=a(81),G=a.n(P),F=(a(156),{apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL),H=function(e,t){return{type:"TOGGLE_MODAL",product:t,show:e}},B=function(e){return{type:"ADD_PRODUCT",product:e}},z=function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(F,"/api/v1/appointment/").concat(t,"/"),a.next=3,E.a.put(r,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){n({type:"UPDATE_APPOINTMENT",appointment:e.data})})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},q=a(530),Y=a(531);function V(e){var t=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}(e.access);return{token:e,name:t.first_name,last_name:t.last_name,role:t.role}}function $(e,t,a){var n=Math.random()<.5?(1-Math.random())*(t-e)+e:Math.random()*(t-e)+e,r=Math.pow(10,a);return Math.floor(n*r)/r}function J(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var W=a(151),Z=a.n(W),Q=(a(302),a(268)),K=a(145),X=a(146);Object(W.registerLocale)("es",Q.a),Object(W.setDefaultLocale)("es");var ee=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(O.a)(this,Object(C.a)(t).call(this,e))).onChangeDate=function(e){try{var t=e.getHours();if(!(t>=7&&t<=20))throw new Error("Error");a.setState({start_date:e,is_valid_date:!0})}catch(n){a.setState({start_date:null,is_valid_date:!1})}},a.setStep=function(e){a.setState({step:e})},a.onClickMainBtn=function(){if(a.state.step===a.state.max_steps)try{var e=a.formRef.current;if(!0===e.checkValidity()){var t=new FormData(e);t.append("start_date",Math.floor(a.state.start_date.getTime()/1e3)),t.append("products",JSON.stringify(a.props.products.map((function(e){return e.id})))),t.append("estimated_price",a.props.products.reduce((function(e,t){return e+t.price}),0)),a.props.createAppointment(t,(function(){a.setState(a.initial_state)}))}return void a.setState({form_validated:!0})}catch(n){return void console.log(n)}return a.addStep()},a.addStep=function(){a.setStep(a.state.step+1)},a.backStep=function(){if(1===a.state.step)return a.props.toogleModal(!1);a.setStep(a.state.step-1)},a.formRef=r.a.createRef(),a.initial_state={step:1,max_steps:2,form_validated:!1,start_date:null,is_valid_date:!1},a.state=a.initial_state,a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.show_modal,n=t.main_product,o=t.products;return r.a.createElement(q.a,{show:a,onHide:function(){e.setState(e.initial_state),e.props.toogleModal(!1)},dialogClassName:"modal-appointment",id:"schedule","aria-labelledby":"example-custom-modal-styling-title"},r.a.createElement(q.a.Header,{closeButton:!0},r.a.createElement("div",{className:"slider main-bg-color",style:{left:100-100/this.state.step+"%"}},1!==this.state.step?r.a.createElement("div",{className:"start main-bg-color"}):null,this.state.step!==this.state.max_steps?r.a.createElement("div",{className:"end main-bg-color"}):null),r.a.createElement("div",{className:"step-container"},r.a.createElement("span",{className:"step-number"},"1"),r.a.createElement("span",{className:"step-title"},"Servicios")),r.a.createElement("div",{className:"step-container last"},r.a.createElement("span",{className:"step-number"},"2"),r.a.createElement("span",{className:"step-title"},"Ingresa tus datos"))),r.a.createElement(q.a.Body,null,n&&1===this.state.step?r.a.createElement("div",{className:"modal-appointment-main-product"},r.a.createElement("div",{className:"flex-row-jst-btw"},r.a.createElement("span",{className:"title"},n.name),r.a.createElement(G.a,{count:5,value:$(3.5,5,2),edit:!1,size:18,color1:"#e6e6e6"})),r.a.createElement("div",{className:"flex-row-jst-btw"},r.a.createElement(I.a,{value:n.price,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("p",null,n.duration," Min")),n.description&&""!==n.description.trim()?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Descripci\xf3n")),r.a.createElement("p",{className:"description"},n.description)," "):null,o&&-1===o.findIndex((function(e){return e.id===n.id}))?r.a.createElement(N.a,{variant:"success",size:"sm",onClick:function(){e.props.addProduct(n)}},"Agregar"):null):null,2===this.state.step?r.a.createElement("div",{className:"modal-appointment-form"},r.a.createElement("p",{className:"title"},"Datos de Reserva"),r.a.createElement(Y.a,{ref:this.formRef,noValidate:!0,validated:this.state.form_validated,onSubmit:this.handleSubmit},r.a.createElement(Y.a.Group,{controlId:"start_date"},r.a.createElement(Y.a.Label,null,"Fecha"),r.a.createElement(Z.a,{locale:"es",className:"date-form-control",selected:this.state.start_date,onChange:function(t){return e.onChangeDate(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa",minDate:new Date,minTime:Object(X.default)(Object(K.default)(new Date,0),7),maxTime:Object(X.default)(Object(K.default)(new Date,30),20)})),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"first_name"},r.a.createElement(Y.a.Label,null,"Nombre"),r.a.createElement(Y.a.Control,{required:!0,type:"text",name:"first_name"})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"last_name"},r.a.createElement(Y.a.Label,null,"Apellido"),r.a.createElement(Y.a.Control,{required:!0,type:"text",name:"last_name"}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"email"},r.a.createElement(Y.a.Label,null,"Correo Electr\xf3nico"),r.a.createElement(Y.a.Control,{required:!0,type:"email",name:"email"})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"telephone"},r.a.createElement(Y.a.Label,null,"Tel\xe9fono"),r.a.createElement(Y.a.Control,{required:!0,type:"text",name:"telephone"}))),r.a.createElement(Y.a.Group,{controlId:"notes"},r.a.createElement(Y.a.Label,null,"Comentarios"),r.a.createElement(Y.a.Control,{as:"textarea",name:"notes"})))):null,r.a.createElement("div",{className:"modal-appointment-product-list"},r.a.createElement("div",{className:"title"},"Servicios seleccionados"),r.a.createElement("div",{className:"products"},o&&o.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"products-lists"},o.map((function(t){return r.a.createElement("div",{key:t.id,className:"flex-row-jst-btw product"},r.a.createElement("div",null,r.a.createElement("span",{className:"btn-remove",onClick:function(){e.props.removeProduct(t)}},"\xd7")," ",t.name),r.a.createElement(I.a,{value:t.price,displayType:"text",thousandSeparator:!0,prefix:"$"}))}))),r.a.createElement("div",{className:"flex-row-jst-btw total"},r.a.createElement("strong",null,"Total"),r.a.createElement(I.a,{value:o.reduce((function(e,t){return e+t.price}),0),displayType:"text",thousandSeparator:!0,prefix:"$"}))):r.a.createElement("div",{className:"empty"},"No has agregado ning\xfan servicio")))),r.a.createElement(q.a.Footer,null,r.a.createElement(N.a,{variant:"secondary",onClick:this.backStep},"Atr\xe1s"),r.a.createElement(N.a,{disabled:!o||0===o.length||this.state.step===this.state.max_steps&&!this.state.is_valid_date,variant:"success",onClick:this.onClickMainBtn},this.state.step===this.state.max_steps?"Crear Reserva":"Siguiente")))}}]),t}(n.Component),te=Object(l.b)((function(e){return{show_modal:e.appointmentReducer.show_modal,main_product:e.appointmentReducer.main_product,products:e.appointmentReducer.products}}),(function(e){return{toogleModal:function(t){return e(H(t))},addProduct:function(t){return e(B(t))},removeProduct:function(t){return e(function(e){return{type:"REMOVE_PRODUCT",product:e}}(t))},createAppointment:function(t,a){return e(function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(F,"/api/v1/appointment/create/"),a.next=3,E.a.post(r,e,{headers:{"content-type":"multipart/form-data"}}).then(function(){var e=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,n({type:"TOGGLE_MODAL",show:!1,product:null});case 3:n({type:"CLEAR_PRODUCTS"}),s.b.success("Reserva creada exitosamente!");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),e.response&&e.response.data&&Object.values(e.response.data).length>0?s.b.error("".concat(Object.values(e.response.data)[0])):s.b.error("Ocurri\xf3 un error al crear la reserva")}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))(ee),ae=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props.services,a={apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL;return r.a.createElement(D.a,{className:"services-container"},r.a.createElement(te,null),r.a.createElement(L.a,null,t.map((function(t){return r.a.createElement(A.a,{key:"service-"+t.id,className:"service-card-col",md:4,lg:3,sm:12,xs:12},r.a.createElement(U.a,{className:"service-card",onClick:function(){return e.props.toogleModal(!0,t)}},r.a.createElement("div",{className:"service-image-container"},r.a.createElement(U.a.Img,{width:375,height:211,variant:"top",src:t.photos&&t.photos.length>0?a+t.photos[0].photo:null}),r.a.createElement("div",{className:"after"},r.a.createElement("div",{className:"bottom-left"},r.a.createElement(G.a,{count:5,value:$(3.5,5,2),edit:!1,size:18,color1:"#e6e6e6"})),r.a.createElement("div",{className:"bottom-right service-duration"},t.duration," Min"))),r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null,t.name),r.a.createElement("div",{className:"card-text"},r.a.createElement("div",{className:"service-card-footer"},r.a.createElement(I.a,{value:t.price,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("span",{className:"service-card-btn",onClick:Object(d.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.addProduct(t);case 2:e.props.toogleModal(!0,t);case 3:case"end":return a.stop()}}),a)})))},"+ Reservar"))))))}))))}}]),t}(n.Component),ne=Object(l.b)((function(e){return{services:e.productReducer.products}}),(function(e){return{toogleModal:function(t,a){return e(H(t,a))},addProduct:function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(B(a));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))(ae),re=(a(357),a(192)),oe=a(152),ce=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"page-footer font-small teal pt-4"},r.a.createElement("div",{className:"container-fluid text-center text-md-left"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 mt-md-0 mt-3"},r.a.createElement("h5",{className:"text-uppercase font-weight-bold"},"BarberShop"),r.a.createElement("p",null,"La mejor barber\xeda en el sur de Cali"),r.a.createElement(oe.SocialIcon,{network:"facebook"}),r.a.createElement(oe.SocialIcon,{network:"twitter"}),r.a.createElement(oe.SocialIcon,{network:"instagram"})),r.a.createElement("hr",{className:"clearfix w-100 d-md-none pb-3"}),r.a.createElement("div",{className:"col-md-6 mb-md-0 mb-3"},r.a.createElement("h5",{className:"text-uppercase font-weight-bold"},"Cont\xe1ctanos"),r.a.createElement("div",{className:"map-container"},r.a.createElement(re.Map,{google:this.props.google,zoom:8,style:{width:"400px",height:"200px"},initialCenter:{lat:47.444,lng:-122.176}})),r.a.createElement("span",null,r.a.createElement("strong",null,"Direcci\xf3n:")," 742 Evergreen Terrace"),r.a.createElement("br",null),r.a.createElement("span",null,"3145478954 - 4578115"),r.a.createElement("br",null),r.a.createElement("span",null,"contacto@barbershop.gq")))),r.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2020 Copyright:",r.a.createElement("a",{href:"https://barbershop.gq/"}," Barbershop")))}}]),t}(n.Component),le=Object(re.GoogleApiWrapper)({apiKey:"AIzaSyCc3HtcNF2yVT6kc_lzDRQvIxFy6VL26oY"})(ce),se=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement(ne,null),r.a.createElement(le,null))}}]),t}(n.Component),ie=Object(l.b)((function(e){return{}}),(function(e){return{logout:function(){return e(j(null))},fetchProducts:function(){return e(b())}}}))(se),ue=(a(378),{apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}),me=ue.apiURL,pe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleChange=function(e,t){var n={};n[t]=e.target.value,a.setState(n)},a.onSubmit=function(e){e.preventDefault(),fetch("".concat(me,"/api/token/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){if(e.error)throw e.error;if("undefined"===typeof e.access||""===e.access)throw new Error("Credenciales incorrectas");localStorage.setItem("currentToken",JSON.stringify(e)),s.b.success("Credenciales correctas"),a.props.login(e)})).catch((function(e){try{if("object"===typeof e)throw new Error("Error");s.b.error(e)}catch(t){s.b.error("Credenciales incorrectas")}}))},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.barber;return t.is_logged?r.a.createElement(R.a,{to:"/admin"}):r.a.createElement("div",{className:"fondo",style:{backgroundColor:"red",backgroundImage:"url(".concat(ue.staticURL,"/media/bg-login.jpeg)")}},r.a.createElement(D.a,{className:"d-flex justify-content-center mt-5"},r.a.createElement(U.a,{style:{width:"30rem"}},r.a.createElement(U.a.Body,null,r.a.createElement("div",{className:"sidebar-heading text-center mt-1 pro-img"},r.a.createElement("img",{alt:"",src:a.logo,className:"profile-pic imagen_cover img-thumbnail"})),r.a.createElement(U.a.Title,{className:"text-center"},a.name),r.a.createElement(D.a,null,r.a.createElement(Y.a,{onSubmit:this.onSubmit},r.a.createElement(Y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(Y.a.Label,null,"Usuario"),r.a.createElement(Y.a.Control,{type:"text",placeholder:"Nombre de usuario",value:this.state.username,onChange:function(t){return e.handleChange(t,"username")}}),r.a.createElement(Y.a.Text,{className:"text-muted"})),r.a.createElement(Y.a.Group,{controlId:"formBasicPassword"},r.a.createElement(Y.a.Label,null,"Contrase\xf1a"),r.a.createElement(Y.a.Control,{type:"password",placeholder:"Contrase\xf1a",value:this.state.password,onChange:function(t){return e.handleChange(t,"password")}})),r.a.createElement(N.a,{className:"btn-block mb-3",variant:"primary",type:"submit"},"Ingresar")))))))}}]),t}(n.Component),de=Object(l.b)((function(e){return{barber:e.general.barber,is_logged:e.general.is_logged}}),(function(e){return{login:function(t){e(j(t))}}}))(pe),he=a(529),Ee=a(55),fe=a(28),be={apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL,ve=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state=Object(fe.a)({},a.props.user,{username:a.props.user.username,email:a.props.user.email,first_name:a.props.user.first_name,last_name:a.props.user.last_name,role:a.props.user.role}),a.onChange=function(e){a.setState(Object(Ee.a)({},e.target.name,e.target.value))},a.onSubmite=function(e){e.preventDefault();var t=a.state;a.props.updateUser(t,a.props.handleChangeModal)},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(Y.a,{onSubmit:this.onSubmite},r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridUsername"},r.a.createElement(Y.a.Label,null,"Username"),r.a.createElement(Y.a.Control,{name:"username",type:"text",required:!0,placeholder:"Username",defaultValue:this.state.username,onChange:this.onChange})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridEmail"},r.a.createElement(Y.a.Label,null,"Email"),r.a.createElement(Y.a.Control,{name:"email",type:"email",required:!0,placeholder:"Email",defaultValue:this.state.email,onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridName"},r.a.createElement(Y.a.Label,null,"Nombre"),r.a.createElement(Y.a.Control,{name:"first_name",type:"text",required:!0,placeholder:"nombre",defaultValue:this.state.first_name,onChange:this.onChange})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridLatsName"},r.a.createElement(Y.a.Label,null,"last_name"),r.a.createElement(Y.a.Control,{name:"last_name",type:"text",required:!0,placeholder:"apellido",defaultValue:this.state.last_name,onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridState"},r.a.createElement(Y.a.Label,null,"Rol"),r.a.createElement(Y.a.Control,{name:"role",as:"select",value:this.state.role,required:!0,onChange:this.onChange},r.a.createElement("option",{value:"0",disabled:!0},"Seleccione un rol..."),r.a.createElement("option",{value:"ADMIN"},"Administrador"),r.a.createElement("option",{value:"CLIENTE"},"Cliente"),r.a.createElement("option",{value:"PELUQUERO"},"Peluquero")))),r.a.createElement(N.a,{variant:"success",type:"submit"},"Actualizar"),r.a.createElement(N.a,{variant:"secondary",onClick:this.props.handleChangeModal},"Cancelar"))}}]),t}(n.Component),ge=Object(l.b)((function(e){}),(function(e){return{updateUser:function(t,a){e(function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(be,"/api/v1/user/").concat(e.id,"/"),a.next=3,E.a.put(r,e).then((function(e){n({type:"UPDATE_USER",payload:{user:e.data}}),s.b.success("Usuario actualizado correctamente"),t()})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))(ve),ye=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={show:!1},a.handleChangeModal=function(){a.setState({show:!a.state.show})},a.handleDelete=function(){window.confirm("\xbfEsta seguro de eliminar al usuario '".concat(a.props.user.username,"' ?"))&&(a.props.user.is_active=!1,a.props.deleteUser(a.props.user))},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e.username,a=e.email,n=e.first_name,o=e.last_name,c=e.role;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,a),r.a.createElement("td",null,n," ",o),r.a.createElement("td",null,c),r.a.createElement("td",null,r.a.createElement(L.a,{className:"text-center"},r.a.createElement(A.a,null,r.a.createElement(N.a,{className:"btn-block",variant:"warning",type:"submit",onClick:this.handleChangeModal},"Editar")),r.a.createElement(A.a,null,r.a.createElement(N.a,{className:"btn-block",variant:"danger",type:"button",onClick:this.handleDelete},"Eliminar"))))),r.a.createElement(q.a,{show:this.state.show,onHide:this.handleChangeModal},r.a.createElement(q.a.Header,{bg:"success",closeButton:!0},r.a.createElement(q.a.Title,null,"Editar Usuario")),r.a.createElement(q.a.Body,null,r.a.createElement(ge,{user:this.props.user,handleChangeModal:this.handleChangeModal}))))}}]),t}(n.Component),Oe=Object(l.b)((function(e){}),(function(e){return{deleteUser:function(t){return e(function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(be,"/api/v1/user/").concat(e.id,"/"),t.next=3,E.a.put(n,e).then((function(e){a({type:"DELETE_USER",payload:{user:e.data}}),s.b.success("Usuario eliminado correctamente")})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(ye),Ce=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",first_name:"",last_name:"",role:"0",is_active:!0,password:""},a.onChange=function(e){a.setState(Object(Ee.a)({},e.target.name,e.target.value))},a.onSubmite=function(e){e.preventDefault();var t=a.state;a.props.createUser(t,a.props.handleChangeModal)},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(Y.a,{onSubmit:this.onSubmite},r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridUsername"},r.a.createElement(Y.a.Label,null,"Username"),r.a.createElement(Y.a.Control,{name:"username",type:"text",required:!0,placeholder:"Username",onChange:this.onChange})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridEmail"},r.a.createElement(Y.a.Label,null,"Email"),r.a.createElement(Y.a.Control,{name:"email",type:"email",required:!0,placeholder:"Email",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridName"},r.a.createElement(Y.a.Label,null,"Nombre"),r.a.createElement(Y.a.Control,{name:"first_name",type:"text",required:!0,placeholder:"Nombre",onChange:this.onChange})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridLatsName"},r.a.createElement(Y.a.Label,null,"Apellido"),r.a.createElement(Y.a.Control,{name:"last_name",type:"text",required:!0,placeholder:"Apellido",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridState"},r.a.createElement(Y.a.Label,null,"role"),r.a.createElement(Y.a.Control,{name:"role",as:"select",value:this.state.role,required:!0,onChange:this.onChange},r.a.createElement("option",{value:"0",disabled:!0},"Seleccione un rol..."),r.a.createElement("option",{value:"ADMIN"},"Administrador"),r.a.createElement("option",{value:"CLIENTE"},"Cliente"),r.a.createElement("option",{value:"PELUQUERO"},"Peluquero")))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridPassword1"},r.a.createElement(Y.a.Label,null,"Contrase\xf1a"),r.a.createElement(Y.a.Control,{name:"password",type:"password",required:!0,placeholder:"Contrase\xf1a",onChange:this.onChange}))),r.a.createElement(N.a,{variant:"success",type:"submit"},"Crear Usuario"),r.a.createElement(N.a,{variant:"secondary",onClick:this.props.handleChangeModal},"Cancelar"))}}]),t}(n.Component),we=Object(l.b)((function(e){}),(function(e){return{createUser:function(t,a){return e(function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(be,"/api/v1/user/"),a.next=3,E.a.post(r,e).then((function(e){n({type:"CREATE_USER",payload:{user:e.data}}),s.b.success("Usuario creado correctamente"),t()})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))(Ce),je=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={show:!1},a.handleChangeModal=function(){return a.setState({show:!a.state.show})},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){var e=this.props.users;return r.a.createElement(D.a,{className:"mt-5"},r.a.createElement(U.a,{border:"primary"},r.a.createElement(U.a.Header,null,"Usuarios"),r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null," Gestion de usuarios  "),r.a.createElement(N.a,{variant:"success",onClick:this.handleChangeModal},"Crear Usuario"),r.a.createElement(q.a,{show:this.state.show,onHide:this.handleChangeModal},r.a.createElement(q.a.Header,{bg:"success",closeButton:!0},r.a.createElement(q.a.Title,null,"Crear Usuario")),r.a.createElement(q.a.Body,null,r.a.createElement(we,{handleChangeModal:this.handleChangeModal}))),r.a.createElement(he.a,{className:"table mt-3",responsive:!0,striped:!0,hover:!0},r.a.createElement("thead",{className:"bg-primary text-white"},r.a.createElement("tr",null,r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Rol"),r.a.createElement("th",{colSpan:2},"Acciones"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement(Oe,{key:e.id,user:e})})))))))}}]),t}(n.Component),_e=Object(l.b)((function(e){return{users:e.userReducer.users}}),(function(e){return{fetchUsers:function(){return e(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(be,"/api/v1/user/"),e.next=3,E.a.get(a).then((function(e){t({type:"FETCH_USERS",payload:{users:e.data.results}})})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(je),Ne=a(39),xe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",price:"",description:"",duration:"",status:"0",files:[]},a.onChange=function(e){a.setState(Object(Ee.a)({},e.target.name,e.target.value))},a.handleSelectPhotos=function(e){a.setState({files:[].concat(Object(Ne.a)(a.state.files),Object(Ne.a)(e.target.files))})},a.onSubmit=function(e){e.preventDefault();var t=new FormData;t.append("name",a.state.name),t.append("price",a.state.price),t.append("description",a.state.description),t.append("duration",a.state.duration),t.append("status",a.state.status),a.props.createProduct(t,a.props.toggleModal,a.state.files)},a.handleDeleteSelect=function(e){a.setState({files:a.state.files.filter((function(t){return t.name!==e.name}))})},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Y.a,{onSubmit:this.onSubmit},r.a.createElement(L.a,null,r.a.createElement(A.a,null,r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridUsername"},r.a.createElement(Y.a.Label,null,"Nombre"),r.a.createElement(Y.a.Control,{name:"name",type:"text",required:!0,placeholder:"Nombre",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridEmail"},r.a.createElement(Y.a.Label,null,"Descripcion"),r.a.createElement(Y.a.Control,{as:"textarea",name:"description",type:"text",required:!0,placeholder:"Descripcion",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridLatsName"},r.a.createElement(Y.a.Label,null,"Precio"),r.a.createElement(Y.a.Control,{name:"price",type:"number",required:!0,placeholder:"Precio",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridPhone"},r.a.createElement(Y.a.Label,null,"Duracion"),r.a.createElement(Y.a.Control,{name:"duration",placeholder:"Duracion",type:"text",required:!0,onChange:this.onChange}))),r.a.createElement(Y.a.Group,{id:"formGridAactive"},r.a.createElement(Y.a.Label,null,"Estado"),r.a.createElement(Y.a.Control,{name:"status",as:"select",value:this.state.status,required:!0,onChange:this.onChange},r.a.createElement("option",{value:"0",disabled:!0},"Seleccione un estado..."),r.a.createElement("option",{value:"ACTIVO"},"Activo"),r.a.createElement("option",{value:"INACTIVO"},"Inactivo"))),r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridName"},r.a.createElement(Y.a.Label,null,"Fotos"),r.a.createElement(Y.a.Control,{type:"file",name:"files",multiple:!0,required:!0,onChange:this.handleSelectPhotos}))),this.state.files&&this.state.files.map((function(t){return r.a.createElement(A.a,{lg:6,sm:6,className:"mb-2"},r.a.createElement(U.a,{style:{width:"150px"}},r.a.createElement(U.a.Img,{className:"img-thumbnail",variant:"top",style:{height:"150px",width:"150px"},src:"string"==typeof t?t:URL.createObjectURL(t)}),r.a.createElement("span",{style:{fontSize:"20px",color:"#f5222d"},className:"text-center",onClick:function(){return e.handleDeleteSelect(t)}},r.a.createElement("i",{style:{cursor:"pointer"},title:"eliminar",className:"fas fa-times"}))))}))),r.a.createElement(N.a,{variant:"success",type:"submit"},"Crear Servicio"),r.a.createElement(N.a,{variant:"secondary",onClick:this.props.toggleModal},"Cancelar"))}}]),t}(n.Component),Se=Object(l.b)((function(e){return{}}),(function(e){return{createProduct:function(t,a,n){e(function(e,t,a){return function(){var n=Object(d.a)(p.a.mark((function n(r){var o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o="".concat(f,"/api/v1/product/"),n.next=3,E.a.post(o,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){r({type:"CREATE_PRODUCT",payload:{product:e.data,photos:a}}),s.b.success("Servicio creado correctamente"),t()})).catch((function(e){e.response&&e.response.data&&Object.values(e.response.data).length>0?s.b.error("".concat(Object.values(e.response.data)[0])):s.b.error("Ocurri\xf3 un error al crear el servicio")}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,a,n))}}}))(xe),Re=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state=Object(fe.a)({},a.props.service,{name:a.props.service.name,description:a.props.service.description,price:a.props.service.price,duration:a.props.service.duration,status:a.props.service.status,files:a.props.service.photos,extra:[]}),a.onChange=function(e){a.setState(Object(Ee.a)({},e.target.name,e.target.value))},a.handleSelectPhotos=function(e){a.setState({extra:[].concat(Object(Ne.a)(a.state.extra),Object(Ne.a)(e.target.files))}),console.log(a.state.extra)},a.handleDeletePhoto=function(e){var t=new FormData;t.append("product",e.product),t.append("deleted",!0);var n="".concat({apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL,"/api/v1/product_photo/").concat(e.id,"/");E.a.put(n,t,{headers:{"content-type":"multipart/form-data"}}).then((function(t){a.setState({files:a.state.files.filter((function(t){return t.id!==e.id}))});var n=new FormData;n.append("name",a.state.name),n.append("price",a.state.price),n.append("description",a.state.description),n.append("duration",a.state.duration),n.append("status",a.state.status),a.props.updateProduct(n,a.props.service.id,a.state.extra)})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}))},a.handleDeleteSelect=function(e){a.setState({extra:a.state.extra.filter((function(t){return t.name!==e.name}))})},a.onSubmit=function(e){e.preventDefault();var t=new FormData;t.append("name",a.state.name),t.append("price",a.state.price),t.append("description",a.state.description),t.append("duration",a.state.duration),t.append("status",a.state.status),a.props.updateProduct(t,a.props.service.id,a.state.extra,a.props.handleChangeModal)},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Y.a,{onSubmit:this.onSubmit},r.a.createElement(L.a,null,r.a.createElement(A.a,{lg:6},r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridUsername"},r.a.createElement(Y.a.Label,null,"Nombre"),r.a.createElement(Y.a.Control,{name:"name",type:"text",required:!0,defaultValue:this.state.name,placeholder:"Nombre",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridEmail"},r.a.createElement(Y.a.Label,null,"Descripcion"),r.a.createElement(Y.a.Control,{as:"textarea",name:"description",type:"text",defaultValue:this.state.description,required:!0,placeholder:"Descripcion",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridLatsName"},r.a.createElement(Y.a.Label,null,"Precio"),r.a.createElement(Y.a.Control,{name:"price",type:"number",required:!0,defaultValue:this.state.price,placeholder:"Precio",onChange:this.onChange}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridPhone"},r.a.createElement(Y.a.Label,null,"Duracion"),r.a.createElement(Y.a.Control,{name:"duration",placeholder:"Duracion",defaultValue:this.state.duration,type:"text",required:!0,onChange:this.onChange}))),r.a.createElement(Y.a.Group,{id:"formGridAactive"},r.a.createElement(Y.a.Label,null,"Estado"),r.a.createElement(Y.a.Control,{name:"status",as:"select",value:this.state.status,required:!0,onChange:this.onChange},r.a.createElement("option",{value:"0",disabled:!0},"Seleccione un estado..."),r.a.createElement("option",{value:"ACTIVO"},"Activo"),r.a.createElement("option",{value:"INACTIVO"},"Inactivo"))),r.a.createElement(Y.a.Group,{as:A.a,controlId:"formGridExtra"},r.a.createElement(Y.a.Label,null,"Fotos"),r.a.createElement(Y.a.Control,{type:"file",name:"extra",multiple:!0,required:!this.state.files,onChange:this.handleSelectPhotos}))),r.a.createElement(A.a,{lg:6},r.a.createElement(L.a,null,this.state.files.map((function(t){return r.a.createElement(A.a,{lg:6,sm:6,className:"mb-2"},r.a.createElement(U.a,{style:{width:"150px"}},r.a.createElement(U.a.Img,{className:"img-thumbnail",variant:"top",style:{height:"150px",width:"150px"},src:t.photo}),r.a.createElement("span",{style:{fontSize:"20px",color:"#f5222d"},className:"text-center",onClick:function(){return e.handleDeletePhoto(t)}},r.a.createElement("i",{style:{cursor:"pointer"},title:"eliminar",className:"fas fa-times"}))))})),this.state.extra&&this.state.extra.map((function(t){return r.a.createElement(A.a,{lg:6,sm:6,className:"mb-2"},r.a.createElement(U.a,{style:{width:"150px"}},r.a.createElement(U.a.Img,{className:"img-thumbnail",variant:"top",style:{height:"150px",width:"150px"},src:"string"==typeof t?t:URL.createObjectURL(t)}),r.a.createElement("span",{style:{fontSize:"20px",color:"#f5222d"},className:"text-center",onClick:function(){return e.handleDeleteSelect(t)}},r.a.createElement("i",{style:{cursor:"pointer"},title:"eliminar",className:"fas fa-times"}))))}))))),r.a.createElement(N.a,{variant:"success",type:"submit"},"Actualizar Servicio"),r.a.createElement(N.a,{variant:"secondary",onClick:this.props.handleChangeModal},"Cancelar"))}}]),t}(n.Component),Te=Object(l.b)((function(e){}),(function(e){return{updateProduct:function(t,a,n,r){return e(function(e,t,a,n){return function(){var r=Object(d.a)(p.a.mark((function r(o){var c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c="".concat(f,"/api/v1/product/").concat(t,"/"),r.next=3,E.a.put(c,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){o({type:"UPDATE_PRODUCT",payload:{product:e.data,extra:a}}),s.b.success("Servicio actualizado correctamente"),n&&n()})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,a,n,r))}}}))(Re),Me=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={show:!1},a.handleChangeModal=function(){a.setState({show:!a.state.show})},a.handleDelete=function(){var e=new FormData;e.append("name",a.props.service.name),e.append("price",a.props.service.price),e.append("description",a.props.service.description),e.append("duration",a.props.service.duration),e.append("status",a.props.service.status),window.confirm("\xbfEsta seguro de eliminar el servicio '".concat(a.props.service.name,"' ?"))&&(a.props.service.deleted=!0,e.append("deleted",!0),a.props.deleteProduct(e,a.props.service.id))},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.service,t=e.name,a=e.price,o=e.duration;return r.a.createElement(n.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,"$ ",a),r.a.createElement("td",null,o),r.a.createElement("td",null,r.a.createElement(L.a,{className:"text-center"},r.a.createElement(A.a,null,r.a.createElement(N.a,{className:"btn-block",variant:"warning",type:"submit",onClick:this.handleChangeModal},"Editar")),r.a.createElement(A.a,null,r.a.createElement(N.a,{className:"btn-block",variant:"danger",type:"button",onClick:this.handleDelete},"Eliminar"))))),r.a.createElement(q.a,{show:this.state.show,size:"lg",onHide:this.handleChangeModal},r.a.createElement(q.a.Header,{bg:"success",closeButton:!0},r.a.createElement(q.a.Title,null,"Editar Servicio")),r.a.createElement(q.a.Body,null,r.a.createElement(Te,{service:this.props.service,handleChangeModal:this.handleChangeModal}))))}}]),t}(n.Component),ke=Object(l.b)((function(e){}),(function(e){return{deleteProduct:function(t,a){return e(function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(f,"/api/v1/product/").concat(t,"/"),a.next=3,E.a.delete(r,e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){n({type:"DELETE_PRODUCT",payload:{product:{id:t}}}),s.b.success("Servicio eliminado correctamente")})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t,a))}}}))(Me),De=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={show:!1},a.toggleModal=function(){a.setState({show:!a.state.show})},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this.props.services;return r.a.createElement(D.a,{className:"mt-5"},r.a.createElement(U.a,{border:"primary"},r.a.createElement(U.a.Header,null,"Servicios"),r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null," Gestion de servicios  "),r.a.createElement(N.a,{variant:"success",onClick:this.toggleModal},"Crear Servicio"),r.a.createElement(q.a,{size:"lg",show:this.state.show,onHide:this.toggleModal},r.a.createElement(q.a.Header,{bg:"success",closeButton:!0},r.a.createElement(q.a.Title,null,"Crear Servicio")),r.a.createElement(q.a.Body,null,r.a.createElement(Se,{toggleModal:this.toggleModal}))),r.a.createElement("div",{className:"table-responsive"},r.a.createElement(he.a,{className:"table mt-3",striped:!0,hover:!0},r.a.createElement("thead",{className:"bg-primary text-white"},r.a.createElement("tr",null,r.a.createElement("th",null,"Servicio"),r.a.createElement("th",null,"precio"),r.a.createElement("th",null,"duracion"),r.a.createElement("th",null,"acciones"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement(ke,{key:e.id,position:e.id,service:e})}))))))))}}]),t}(n.Component),Le=Object(l.b)((function(e){return{services:e.productReducer.products}}),(function(e){return{fetchProducts:function(){return e(b())}}}))(De),Ae=a(45),Ue=a.n(Ae),Ie=(a(120),function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.appointment,a=e.show_modal,n=e.onHide;return r.a.createElement(q.a,{show:a,onHide:function(){n()},dialogClassName:"modal-appointment",id:"schedule"},r.a.createElement(q.a.Header,{closeButton:!0,className:"no-slider"},r.a.createElement(q.a.Title,null,"Datos de la Reserva")),r.a.createElement(q.a.Body,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-appointment-main-product"},r.a.createElement("div",{className:"flex-row-jst-btw"},r.a.createElement("span",{className:"title"},"".concat(t.user.first_name," ").concat(t.user.last_name)),r.a.createElement(G.a,{count:5,value:t.rating,edit:!1,size:30,color1:"#e6e6e6"})),r.a.createElement("div",{className:"flex-row-jst-btw"},r.a.createElement("p",null,r.a.createElement("strong",null,"Correo Electr\xf3nico:")," ",t.user.email),r.a.createElement("p",null,r.a.createElement("strong",null,"Tel\xe9fono:")," ",t.user.telephone)),r.a.createElement("div",{className:"flex-row-jst-btw"},r.a.createElement("p",null,r.a.createElement("strong",null,"Fecha Programada:")," ",Ue()(t.date).format("MMMM Do YYYY, h:mm:ss a")),r.a.createElement("p",null,r.a.createElement("strong",null,"Estado:")," ",t.status)),"REALIZADA"===t.status?r.a.createElement("div",{className:"flex-row-jst-btw"},r.a.createElement("p",null,r.a.createElement("strong",null,"Fecha Inicial:")," ",Ue()(t.start_date).format("MMMM Do YYYY, h:mm:ss a")),r.a.createElement("p",null,r.a.createElement("strong",null,"Fecha Final:")," ",Ue()(t.end_date).format("MMMM Do YYYY, h:mm:ss a"))):null,t.notes&&""!==t.notes.trim()?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Notas")),r.a.createElement("p",{className:"description"},t.notes)," "):null,"REALIZADA"===t.status&&"undefined"!==typeof t.final_price?r.a.createElement("p",null,r.a.createElement("strong",null,"Precio Final")," ",r.a.createElement(I.a,{value:t.final_price,displayType:"text",thousandSeparator:!0,prefix:"$"})):null),r.a.createElement("div",{className:"modal-appointment-product-list"},r.a.createElement("div",{className:"title"},"Servicios seleccionados"),r.a.createElement("div",{className:"products"},t.product&&t.product.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"products-lists"},t.product.map((function(e){return r.a.createElement("div",{key:e.id,className:"flex-row-jst-btw product"},r.a.createElement("div",null,e.name),r.a.createElement(I.a,{value:e.price,displayType:"text",thousandSeparator:!0,prefix:"$"}))}))),r.a.createElement("div",{className:"flex-row-jst-btw total"},r.a.createElement("strong",null,"Total"),r.a.createElement(I.a,{value:t.product.reduce((function(e,t){return e+t.price}),0),displayType:"text",thousandSeparator:!0,prefix:"$"}))):r.a.createElement("div",{className:"empty"},"No tiene ningun servicio")))):null))}}]),t}(n.Component)),Pe=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(O.a)(this,Object(C.a)(t).call(this,e))).onChange=function(e){a.setState(Object(Ee.a)({},e.target.name,e.target.value))},a.onClickMainBtn=function(){try{var e=a.formRef.current;if(!0===e.checkValidity()){var t=new FormData;t.append("end_date",(new Date).toISOString()),t.append("status","REALIZADA"),t.append("final_price",e.final_price.value),t.append("rating",a.state.rating),a.props.updateAppointment(t,a.props.appointment.id),a.props.onHide()}return void a.setState({form_validated:!0})}catch(n){return void console.log(n)}},a.formRef=r.a.createRef(),a.initial_state={form_validated:!1,rating:0,final_price:null},a.state=a.initial_state,a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.appointment,n=t.show_modal,o=t.onHide;return r.a.createElement(q.a,{show:n,onHide:function(){o()},dialogClassName:"modal-appointment",id:"schedule"},r.a.createElement(q.a.Header,{closeButton:!0,className:"no-slider"},r.a.createElement(q.a.Title,null,"Finalizar Reserva")),r.a.createElement(q.a.Body,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-appointment-form"},r.a.createElement("p",{className:"title"},"Datos de Reserva"),r.a.createElement(Y.a,{ref:this.formRef,noValidate:!0,validated:this.state.form_validated,onSubmit:this.handleSubmit},r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"start_date"},r.a.createElement(Y.a.Label,null,"Fecha inicial"),r.a.createElement("p",null,Ue()(a.start_date).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement(Y.a.Group,{as:A.a,controlId:"start_date"},r.a.createElement(Y.a.Label,null,"Fecha final"),r.a.createElement("p",null,Ue()(new Date).format("MMMM Do YYYY, h:mm:ss a")))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"first_name"},r.a.createElement(Y.a.Label,null,"Nombre"),r.a.createElement(Y.a.Control,{value:a.user.first_name,disabled:!0,type:"text",name:"first_name"})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"last_name"},r.a.createElement(Y.a.Label,null,"Apellido"),r.a.createElement(Y.a.Control,{value:a.user.last_name,disabled:!0,type:"text",name:"last_name"}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"email"},r.a.createElement(Y.a.Label,null,"Correo Electr\xf3nico"),r.a.createElement(Y.a.Control,{value:a.user.email,disabled:!0,type:"email",name:"email"})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"telephone"},r.a.createElement(Y.a.Label,null,"Tel\xe9fono"),r.a.createElement(Y.a.Control,{value:a.user.telephone,disabled:!0,type:"text",name:"telephone"}))),r.a.createElement(Y.a.Group,{controlId:"notes"},r.a.createElement(Y.a.Label,null,"Comentarios"),r.a.createElement(Y.a.Control,{as:"textarea",value:a.notes,disabled:!0,name:"notes"})),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Group,{as:A.a,controlId:"final_price"},r.a.createElement(Y.a.Label,null,"Precio final"),r.a.createElement(Y.a.Control,{onChange:this.onChange,defaultValue:a.estimated_price,type:"text",name:"final_price"})),r.a.createElement(Y.a.Group,{as:A.a,controlId:"rating"},r.a.createElement(Y.a.Label,null,"Calificaci\xf3n"),r.a.createElement(G.a,{count:5,value:this.state.rating,onChange:function(t){return e.setState({rating:t})},edit:!0,size:30,color1:"#e6e6e6"}))))),r.a.createElement("div",{className:"modal-appointment-product-list"},r.a.createElement("div",{className:"title"},"Servicios seleccionados"),r.a.createElement("div",{className:"products"},a.product&&a.product.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"products-lists"},a.product.map((function(e){return r.a.createElement("div",{key:e.id,className:"flex-row-jst-btw product"},r.a.createElement("div",null,e.name),r.a.createElement(I.a,{value:e.price,displayType:"text",thousandSeparator:!0,prefix:"$"}))}))),r.a.createElement("div",{className:"flex-row-jst-btw total"},r.a.createElement("strong",null,"Total"),r.a.createElement(I.a,{value:a.product.reduce((function(e,t){return e+t.price}),0),displayType:"text",thousandSeparator:!0,prefix:"$"}))):r.a.createElement("div",{className:"empty"},"No tiene ningun servicio")))):null),r.a.createElement(q.a.Footer,null,r.a.createElement(N.a,{variant:"secondary",onClick:function(){o()}},"Atr\xe1s"),r.a.createElement(N.a,{variant:"success",onClick:this.onClickMainBtn},"Finalizar")))}}]),t}(n.Component),Ge=Object(l.b)((function(e){return{}}),(function(e){return{updateAppointment:function(t,a){return e(z(t,a))}}}))(Pe),Fe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={search_value:"",seleted_appointment:null,show_modal:!1,show_modal_edit:!1},a.showModal=function(e){a.setState({show_modal:!0,seleted_appointment:e})},a.hideModal=function(){a.setState({show_modal:!1,seleted_appointment:null})},a.showModalEdit=function(e){a.setState({show_modal_edit:!0,seleted_appointment:e})},a.hideModalEdit=function(){a.setState({show_modal_edit:!1,seleted_appointment:null})},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchAppointments()}},{key:"render",value:function(){var e=this,t=this.props.appointments;return r.a.createElement(D.a,{className:"mt-5"},r.a.createElement(Ie,{appointment:this.state.seleted_appointment,show_modal:this.state.show_modal,onHide:this.hideModal}),r.a.createElement(Ge,{appointment:this.state.seleted_appointment,show_modal:this.state.show_modal_edit,onHide:this.hideModalEdit}),r.a.createElement(U.a,{border:"primary"},r.a.createElement(U.a.Header,null,"Reservas"),r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null," Gestion de Reservas  "),r.a.createElement("div",{className:"table-responsive"},r.a.createElement(he.a,{className:"table mt-3",striped:!0,hover:!0},r.a.createElement("thead",{className:"bg-primary text-white"},r.a.createElement("tr",null,r.a.createElement("th",null,"Cliente"),r.a.createElement("th",null,"Fecha"),r.a.createElement("th",{style:{width:"30px"}},"Cantidad Productos"),r.a.createElement("th",null,"Estado"),r.a.createElement("th",null,"Precio Estimado"),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,"".concat(t.user.first_name," ").concat(t.user.last_name)),r.a.createElement("td",null,"".concat(Ue()(t.date).fromNow()," - ").concat(Ue()(t.date).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement("td",null,r.a.createElement("span",{className:"numSpan"},t.product.length)),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(I.a,{value:t.estimated_price,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement("td",null,r.a.createElement(N.a,{variant:"info",onClick:function(){e.showModal(t)}},"Info")),r.a.createElement("td",null,"PENDIENTE"===t.status?r.a.createElement(N.a,{variant:"success",onClick:function(){e.props.startAppointment(t)}},"Iniciar"):r.a.createElement(r.a.Fragment,null," ","EN PROCESO"===t.status?r.a.createElement(N.a,{variant:"success",onClick:function(){e.showModalEdit(t)}},"Finalizar"):null," ")),r.a.createElement("td",null,"PENDIENTE"===t.status?r.a.createElement(N.a,{disabled:!("PENDIENTE"===t.status),variant:"danger",onClick:function(){e.props.denyAppointment(t)}},"Rechazar"):null))}))))))))}}]),t}(n.Component),He=Object(l.b)((function(e){return{appointments:e.appointmentReducer.appointments}}),(function(e){return{fetchAppointments:function(){return e(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(F,"/api/v1/appointment/"),e.next=3,E.a.get(a).then((function(e){t({type:"FETCH_APPOINTMENTS",appointments:e.data.results})})).catch((function(e){s.b.error("".concat(Object.values(e.response.data)[0]))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},startAppointment:function(t){return e(function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=new FormData).append("status","EN PROCESO"),n.append("start_date",(new Date).toISOString()),a(z(n,e.id));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},denyAppointment:function(t){return e(function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=new FormData).append("status","RECHAZADA"),a(z(n,e.id));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Fe),Be=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.barber;return r.a.createElement("div",{className:"bg-primary",id:"sidebar-wrapper"},r.a.createElement("div",{className:"sidebar-heading text-center mt-1 pro-img"},r.a.createElement(T.b,{to:"/"},r.a.createElement("img",{alt:"",src:e.logo,className:"profile-pic imagen_cover img-thumbnail"})," "),r.a.createElement("br",null),r.a.createElement("div",{className:"text-white text-center"},e.name)),r.a.createElement("div",{className:"list-group list-group-flush"},r.a.createElement(T.b,{to:"/",className:"list-group-item list-group-item-action bg-primary text-white"},r.a.createElement("i",{className:"fas fa-home"}),"  Home"),r.a.createElement(T.b,{to:"/admin/",className:"list-group-item list-group-item-action bg-primary text-white"},r.a.createElement("i",{className:"fas fa-chart-bar"}),"  Reportes"),r.a.createElement(T.b,{to:"/admin/users",className:"list-group-item list-group-item-action bg-primary text-white"},r.a.createElement("i",{className:"fas fa-users"}),"  Usuarios"),r.a.createElement(T.b,{to:"/admin/services",className:"list-group-item list-group-item-action bg-primary text-white"},r.a.createElement("i",{className:"fas fa-barcode"}),"  Servicios"),r.a.createElement(T.b,{to:"/admin/appointments",className:"list-group-item list-group-item-action bg-primary text-white"},r.a.createElement("i",{className:"fas fa-calendar"}),"  Reservas")))}}]),t}(n.Component),ze=Object(l.b)((function(e){return{barber:e.general.barber}}))(Be),qe=a(26),Ye=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.getData=function(){var e="".concat({apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL,"/api/v1/reports/"),t=new FormData;t.append("report","top-services"),E.a.post(e,t,{headers:{"content-type":"multipart/form-data"}}).then(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({data:t.data});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return r.a.createElement(qe.Chart,{id:"chart-top-services",dataSource:this.state.data},r.a.createElement(qe.CommonSeriesSettings,{argumentField:"name",valueField:"count",type:"bar",ignoreEmptyPoints:!0},r.a.createElement(qe.Label,{visible:!0},r.a.createElement(qe.Format,{type:"fixedPoint",precision:0}))),r.a.createElement(qe.SeriesTemplate,{nameField:"name"}),r.a.createElement(qe.Title,{text:"Servicios m\xe1s vendidos"}),r.a.createElement(qe.Legend,{visible:!1,verticalAlignment:"bottom",horizontalAlignment:"center"}),r.a.createElement(qe.Export,{enabled:!0}),r.a.createElement(qe.Tooltip,{enabled:!0,customizeTooltip:function(e){return{text:"".concat(e.argumentText,"<br/># ").concat(e.valueText)}}}))}}]),t}(n.Component),Ve=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.getData=function(){var e="".concat({apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL,"/api/v1/reports/"),t=new FormData;t.append("report","top-clients"),E.a.post(e,t,{headers:{"content-type":"multipart/form-data"}}).then(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({data:t.data});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return r.a.createElement(qe.Chart,{id:"chart-top-clients",dataSource:this.state.data},r.a.createElement(qe.CommonSeriesSettings,{argumentField:"name",valueField:"count",type:"bar",ignoreEmptyPoints:!0},r.a.createElement(qe.Label,{visible:!0},r.a.createElement(qe.Format,{type:"fixedPoint",precision:0}))),r.a.createElement(qe.SeriesTemplate,{nameField:"name"}),r.a.createElement(qe.Title,{text:"Clientes Recurrentes"}),r.a.createElement(qe.Legend,{visible:!1,verticalAlignment:"bottom",horizontalAlignment:"center"}),r.a.createElement(qe.Export,{enabled:!0}),r.a.createElement(qe.Tooltip,{enabled:!0,customizeTooltip:function(e){return{text:"".concat(e.argumentText,"<br/># ").concat(e.valueText)}}}))}}]),t}(n.Component),$e=function(e){function t(e){var a;Object(g.a)(this,t),(a=Object(O.a)(this,Object(C.a)(t).call(this,e))).getData=function(){var e="".concat({apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL,"/api/v1/reports/"),t=new FormData;t.append("report","appointments-by-month"),E.a.post(e,t,{headers:{"content-type":"multipart/form-data"}}).then(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=Object(Ne.a)(a.state.data),r=0;r<t.data.length;r++)o=t.data[r],n[new Date(o.month).getUTCMonth()].value=o.count;a.setState({data:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))};return a.state={data:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"].map((function(e,t){return{month:e,value:0,month_index:t}}))},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){try{this.getData()}catch(e){}}},{key:"render",value:function(){return r.a.createElement(qe.Chart,{id:"chart-appointments-by-month",dataSource:this.state.data},r.a.createElement(qe.CommonSeriesSettings,{argumentField:"month",valueField:"value",type:"area",ignoreEmptyPoints:!0},r.a.createElement(qe.Label,{visible:!0},r.a.createElement(qe.Format,{type:"fixedPoint",precision:0}))),r.a.createElement(qe.Series,{valueField:"value",name:"month"}),r.a.createElement(qe.Title,{text:"Meses con mas concurrencia",subtitle:"A\xf1o presente"}),r.a.createElement(qe.Legend,{visible:!1,verticalAlignment:"bottom",horizontalAlignment:"center"}),r.a.createElement(qe.Export,{enabled:!0}),r.a.createElement(qe.Tooltip,{enabled:!0,customizeTooltip:function(e){return{text:"".concat(e.argumentText,"<br/># ").concat(e.valueText)}}}))}}]),t}(n.Component),Je=a(73),We=function(e){function t(e){var a;Object(g.a)(this,t),(a=Object(O.a)(this,Object(C.a)(t).call(this,e))).getData=function(){var e="".concat({apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"}.apiURL,"/api/v1/reports/"),t=new FormData;t.append("report","sales-by-month"),E.a.post(e,t,{headers:{"content-type":"multipart/form-data"}}).then(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=Object(Ne.a)(a.state.data),r=0;r<t.data.length;r++)o=t.data[r],n[new Date(o.month).getUTCMonth()].value=o.value;a.setState({data:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))};return a.state={data:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"].map((function(e,t){return{month:e,value:0,month_index:t}}))},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){try{this.getData()}catch(e){}}},{key:"render",value:function(){return r.a.createElement(Je.PieChart,{id:"pie",type:"doughnut",dataSource:this.state.data},r.a.createElement(Je.Series,{argumentField:"month",valueField:"value"},r.a.createElement(Je.Label,{visible:!0,customizeText:function(e){return"$".concat(J(e.originalValue))}},r.a.createElement(Je.Connector,{visible:!0}))),r.a.createElement(Je.Title,{text:"Ventas por Mes",subtitle:"A\xf1o presente"}),r.a.createElement(Je.Legend,{margin:0,horizontalAlignment:"right",verticalAlignment:"top"}),r.a.createElement(Je.Export,{enabled:!0}),r.a.createElement(Je.Tooltip,{enabled:!0,customizeTooltip:function(e){return{text:"".concat(e.argumentText,"<br/>$").concat(J(e.valueText))}}}))}}]),t}(n.Component),Ze=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=[r.a.createElement(Ye,null),r.a.createElement(Ve,null),r.a.createElement($e,null),r.a.createElement(We,null)];return r.a.createElement("div",{className:"dashboard-container"},r.a.createElement(L.a,null,e.map((function(e,t){return r.a.createElement(A.a,{key:"chart-"+t,md:"4",xs:"12",sm:"6",lg:"4",className:"chart-container"},r.a.createElement(U.a,null,r.a.createElement(U.a.Body,null,e)))}))))}}]),t}(n.Component),Qe=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.match;return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex",id:"wrapper"},r.a.createElement(ze,null),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement(k,null),r.a.createElement(R.d,null,r.a.createElement(R.b,{path:"".concat(e.path,"/users")},r.a.createElement(_e,null)),r.a.createElement(R.b,{path:"".concat(e.path,"/services")},r.a.createElement(Le,null)),r.a.createElement(R.b,{path:"".concat(e.path,"/appointments")},r.a.createElement(He,null)),r.a.createElement(R.b,{path:e.path},r.a.createElement(Ze,null))))))}}]),t}(n.Component);Ue.a.locale("es");var Ke=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={search_value:"",seleted_appointment:null},a.onChangeSearch=function(e){a.setState({search_value:e.target.value})},a.showModal=function(e){a.setState({show_modal:!0,seleted_appointment:e})},a.hideModal=function(){a.setState({show_modal:!1,seleted_appointment:null})},a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMyAppointments()}},{key:"render",value:function(){var e=this,t=this.props.my_appointments,a=t;return this.state.search_value&&""!==this.state.search_value.trim()&&(a=t.filter((function(t){var a="".concat(t.user.first_name," ").concat(t.user.last_name," ").concat(t.date," ").concat(t.estimated_price," ").concat(t.status).toLocaleLowerCase(),n=e.state.search_value.toLowerCase();return!!a.includes(n)}))),r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement(Ie,{appointment:this.state.seleted_appointment,show_modal:this.state.show_modal,onHide:this.hideModal}),r.a.createElement(D.a,{className:"my-appointments-container"},r.a.createElement("div",{className:"flex-row-jst-btw"},r.a.createElement("h2",null,"Mis Reservas"),r.a.createElement(Y.a,null,r.a.createElement(Y.a.Group,{as:L.a,controlId:"search"},r.a.createElement(A.a,{sm:"12"},r.a.createElement(Y.a.Control,{value:this.state.search_value,onChange:this.onChangeSearch,placeholder:"Buscar..."}))))),r.a.createElement(he.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"my-appointments-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Cliente"),r.a.createElement("th",null,"Fecha"),r.a.createElement("th",{style:{width:"30px"}},"Cantidad Productos"),r.a.createElement("th",null,"Estado"),r.a.createElement("th",null,"Precio Estimado"),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,"".concat(t.user.first_name," ").concat(t.user.last_name)),r.a.createElement("td",null,"".concat(Ue()(t.date).fromNow()," - ").concat(Ue()(t.date).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement("td",null,r.a.createElement("span",{className:"numSpan"},t.product.length)),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(I.a,{value:t.estimated_price,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement("td",null,r.a.createElement(N.a,{variant:"info",onClick:function(){e.showModal(t)}},"Info")))}))))),r.a.createElement(le,null))}}]),t}(n.Component),Xe=Object(l.b)((function(e){return{my_appointments:e.appointmentReducer.my_appointments}}),(function(e){return{fetchMyAppointments:function(){return e(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(F,"/api/v1/appointment/my/"),e.next=3,E.a.get(a).then((function(e){t({type:"FETCH_MY_APPOINTMENTS",my_appointments:e.data})})).catch((function(e){try{s.b.error("".concat(Object.values(e.response.data)[0]))}catch(e){console.log("e",e)}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(Ke);var et=a(269),tt=function(e){var t=e.component,a=e.roles,n=Object(et.a)(e,["component","roles"]);return r.a.createElement(R.b,Object.assign({},n,{render:function(e){var n=dt.getState().general,o=n.current_user;return n.is_logged?a&&-1===a.indexOf(o.role)?r.a.createElement(R.a,{to:"/"}):r.a.createElement(t,e):r.a.createElement(R.a,{to:"/login"})}}))};E.a.interceptors.request.use((function(e){var t=localStorage.getItem("currentToken")?JSON.parse(localStorage.getItem("currentToken")).access:void 0;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),E.a.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status)return Promise.reject(e);localStorage.removeItem("currentToken"),window.location="/",window.location="/"}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at={users:[]},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS":return Object(fe.a)({},e,{users:t.payload.users});case"CREATE_USER":return Object(fe.a)({},e,{users:[t.payload.user].concat(Object(Ne.a)(e.users))});case"UPDATE_USER":return Object(fe.a)({},e,{users:e.users.map((function(e){return e.id===t.payload.user.id?e=t.payload.user:e}))});case"DELETE_USER":return Object(fe.a)({},e,{users:e.users.filter((function(e){return e.id!==t.payload.user.id}))});default:return e}},rt={products:[]},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return Object(fe.a)({},e,{products:t.payload.products});case"CREATE_PRODUCT":return Object(fe.a)({},e,{products:[t.payload.product].concat(Object(Ne.a)(e.products))});case"UPDATE_PRODUCT":return Object(fe.a)({},e,{products:e.products.map((function(e){return e.id===t.payload.product.id?e=t.payload.product:e}))});case"DELETE_PRODUCT":return Object(fe.a)({},e,{products:e.products.filter((function(e){return e.id!==t.payload.product.id}))});default:return e}},ct={show_modal:!1,main_product:{},products:[],my_appointments:[],appointments:[]},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MODAL":return Object(fe.a)({},e,{show_modal:t.show,main_product:t.product});case"ADD_PRODUCT":var a=e.products.findIndex((function(e){return e.id===t.product.id}));return-1===a?Object(fe.a)({},e,{products:[].concat(Object(Ne.a)(e.products),[t.product])}):e;case"REMOVE_PRODUCT":var n=Object(Ne.a)(e.products),r=n.findIndex((function(e){return e.id===t.product.id}));return-1!==r&&n.splice(r,1),Object(fe.a)({},e,{products:n});case"CLEAR_PRODUCTS":return Object(fe.a)({},e,{products:[]});case"FETCH_MY_APPOINTMENTS":return Object(fe.a)({},e,{my_appointments:t.my_appointments});case"FETCH_APPOINTMENTS":return Object(fe.a)({},e,{appointments:t.appointments});case"UPDATE_APPOINTMENT":return Object(fe.a)({},e,{appointments:e.appointments.map((function(e){return e.id===t.appointment.id?e=t.appointment:e}))});default:return e}},st=Object(i.combineReducers)({general:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGIN":if(!t.token)return localStorage.removeItem("currentToken"),Object(fe.a)({},e,{is_logged:!1,current_user:{}});try{var a=V(t.token);return Object(fe.a)({},e,{is_logged:!0,current_user:a})}catch(n){return Object(fe.a)({},e,{is_logged:!1,current_user:{}})}default:return e}},userReducer:nt,productReducer:ot,appointmentReducer:lt});a.d(t,"store",(function(){return dt}));var it,ut={apiURL:"",staticURL:"https://storage.googleapis.com/barbershop-uv"},mt=ut.apiURL;try{it=V(JSON.parse(localStorage.getItem("currentToken")))}catch(ht){({}),it={}}var pt={general:{current_user:it,is_logged:!(!it||!it.token),barber:{name:"BarberShop",logo:"".concat(ut.staticURL,"/media/logo.jpg")}}},dt=Object(i.createStore)(st,pt,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(v.a,(function(e){return function(e){return function(t){switch(t.type){case"CREATE_PRODUCT":var a="".concat(mt,"/api/v1/product_photo/"),n=t.payload.photos,r=[];return n.map((function(e){var n=new FormData;return n.append("product",t.payload.product.id),n.append("photo",e),E.a.post(a,n).then((function(e){r.push(e.data)})).catch((function(e){console.log(e)}))})),t.payload.product.photos=r,e(t);case"UPDATE_PRODUCT":var o=t.payload.extra,c=t.payload.product.photos;if(o){var l="".concat(mt,"/api/v1/product_photo/");return o.map((function(e){var a=new FormData;return a.append("product",t.payload.product.id),a.append("photo",e),E.a.post(l,a).then((function(e){c.push(e.data)})).catch((function(e){console.log(e)}))})),t.payload.product.photos=c,e(t)}break;default:e(t)}}}}))));c.a.render(r.a.createElement(l.a,{store:dt},r.a.createElement((function(){return r.a.createElement(T.a,null,r.a.createElement(R.d,null,r.a.createElement(tt,{path:"/admin",roles:["ADMIN","Admin"],component:Qe}),r.a.createElement(tt,{path:"/appointments",component:Xe}),r.a.createElement(R.b,{path:"/login"},r.a.createElement(de,null)),r.a.createElement(R.b,{path:"/"},r.a.createElement(ie,null))))}),null),r.a.createElement(s.a,{position:s.b.POSITION.BOTTOM_RIGHT})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[270,1,2]]]);
//# sourceMappingURL=main.332ba717.chunk.js.map